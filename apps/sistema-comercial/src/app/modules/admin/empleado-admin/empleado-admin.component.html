<article class="absolute inset-0 flex flex-auto flex-col p-4 overflow-hidden">
    <section class="relative flex consultas">
        <mat-form-field class="flex-auto">
            <mat-label>Filtrar empleados</mat-label>
            <input matInput [formControl]="ctrlBuscar" placeholder="Introduce el nombre de un empleado">
        </mat-form-field>
    </section>

    <ng-container>
        <section class="relative overflow-y-auto pt-2" ngxUiLoaderBlurred>
            <mat-accordion>
                <mat-expansion-panel *ngFor="let empleado of entityEmpleado.entitiesArray$ | async">
                    <mat-expansion-panel-header class="border-b-2">
                        <mat-panel-title>{{empleado?.nombreCompleto}}</mat-panel-title>
                        <mat-panel-description>
                            <div class="flex flex-auto gap-4 items-center">
                                <span class="basis-1/4">{{empleado?.deptoEmpleado?.nombre | defaultValue: '---'}}</span>
                                <span class="basis-1/4">{{empleado?.puesto | defaultValue: '---'}}</span>
                                <span class="grow">{{empleado?.auth?.usuario | defaultValue: '---'}}</span>
                            </div>
                            <button mat-icon-button (click)="sesion(empleado)">
                                <mat-icon color="primary" [svgIcon]="empleado.auth === null? 'add': 'password'"></mat-icon>
                            </button>
                            <mat-icon svgIcon="{{empleado?.auth !== null? 'lock_open' : 'lock'}}" [ngClass]="empleado?.auth !== null? 'text-green-700': 'text-red-500'"></mat-icon>
                        </mat-panel-description>
                    </mat-expansion-panel-header>

                    <ng-container *ngIf="empleado.auth !== null && empleado.auth.usuario !== 'administrador'">
                        <section class="flex flex-col w-full" *ngFor="let grupo of empleado.auth.role">
                            <div class="text-primary py-2 flex-auto">{{grupo.title}}</div>
                            <div class="flex-auto" *ngFor="let expandible of grupo.children">
                                <span class="pb-2">{{expandible['title']}}</span>
                                <mat-selection-list>
                                    <mat-list-option color="primary" *ngFor="let ruta of expandible.children">{{ruta['title']}}</mat-list-option>
                                </mat-selection-list>
                            </div>
                        </section>
                    </ng-container>
                </mat-expansion-panel>
            </mat-accordion>
            <ngx-ui-loader [loaderId]="ngxLoader"></ngx-ui-loader>
        </section>
    </ng-container>

    <!--    <section class="relative overflow-y-auto flex basis-full flex-wrap gap-4 px-2 pt-4">-->
    <!--        <mat-drawer-container class="flex-auto">-->
    <!--            <mat-drawer class="w-1/3" position="end" mode="side" autoFocus="false" [opened]="abriPanel">-->
    <!--                <section class="relative flex flex-auto flex-col">-->
    <!--                    <app-empleado-sesion (panel)="abriPanel = false"></app-empleado-sesion>-->
    <!--                </section>-->
    <!--            </mat-drawer>-->

    <!--            <mat-drawer-content class="flex flex-col" ngxUiLoaderBlurred>-->
    <!--                <ng-container *ngFor="let empleado of entityEmpleado.entitiesArray$ | async; let i = index; trackBy: trackByFn">-->
    <!--                    <a class="z-20 flex items-center px-6 py-4 md:px-8 cursor-pointer border-b odd:bg-gray-300 dark:odd:bg-gray-800 hover:text-primary-700" (click)="seleccionar(empleado)">-->
    <!--                        <div class="flex flex-0 items-center justify-center w-10 h-10 rounded-full overflow-hidden">-->
    <!--                            <img class="object-cover w-full h-full" src="{{empleado?.avatar | imgDefecto}} " alt="x"/>-->
    <!--                        </div>-->
    <!--                        <div class="flex min-w-0 ml-4 flex-auto gap-8">-->
    <!--                            <div class="font-medium leading-5 truncate border-r-2 basis-72">{{empleado?.nombreCompleto}}</div>-->
    <!--                            <div class="leading-5 truncate text-secondary border-r-2 basis-1/5">{{empleado?.deptoEmpleado?.nombre}}</div>-->
    <!--                            <div class="leading-5 truncate text-secondary border-r-2 basis-1/6">{{empleado?.puesto | defaultValue:'-&#45;&#45;'}}</div>-->
    <!--                            <div class="leading-5 truncate text-secondary border-r-2 grow">{{empleado?.auth?.usuario | defaultValue:'-&#45;&#45;'}}</div>-->
    <!--                            <mat-icon svgIcon="{{empleado?.auth !== null? 'lock_open' : 'lock'}}" [ngClass]="empleado?.auth !== null? 'text-green-700': 'text-red-500'"></mat-icon>-->
    <!--                        </div>-->
    <!--                    </a>-->
    <!--                </ng-container>-->
    <!--                <ngx-ui-loader [loaderId]="ngxLoader"></ngx-ui-loader>-->
    <!--            </mat-drawer-content>-->
    <!--        </mat-drawer-container>-->
    <!--    </section>-->
</article>
